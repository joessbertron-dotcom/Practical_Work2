<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration Form - Bloom College</title>
    <!-- Bootstrap CSS for modal functionality -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .form-section {
            margin-bottom: 20px;
        }
        .form-row {
            display: flex;
            margin-bottom: 15px;
        }
        .form-group {
            flex: 1;
            margin-right: 30px;
            position: relative;
        }
        .form-group:last-child {
            margin-right: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .radio-group {
            display: flex;
            gap: 15px;
        }
        .radio-group label {
            font-weight: normal;
        }
        .address-section {
            border-top: 1px solid #ddd;
            padding-top: 20px;
            margin-top: 20px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .register-btn {
            background-color: #4CAF50;
            color: white;
        }
        .reset-btn {
            background-color: #f44336;
            color: white;
        }
        .image-upload {
            text-align: center;
            margin-bottom: 20px;
        }
        .preview-text {
            color: #666;
            font-style: italic;
        }
        .highlight {
            background-color: #ffffcc;
            border-color: #ffcc00;
        }
        .error {
            border-color: #ff0000;
            background-color: #ffe6e6;
        }
        .error-message {
            color: #ff0000;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }
        .success {
            border-color: #4CAF50;
            background-color: #e8f5e8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>BLOOM COLLEGE</h1>
        <h2><center>Student Registration Form</center></h2>
        
        <form id="registrationForm">
            <!-- Image Upload Section -->
            <div class="image-upload">
                <p class="preview-text">[Preview...]</p>
                <p>(less than 5 MB)</p>
                <label>Student image:</label>
            </div>
            
            <!-- Personal Information Section -->
            <div class="form-section">
                <div class="form-row">
                    <div class="form-group">
                        <label for="studentName">Student Name:</label>
                        <input type="text" id="studentName" placeholder="Full Name">
                        <div class="error-message" id="studentNameError">Please enter a valid name (letters and spaces only)</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="fatherName">Father's Name:</label>
                        <input type="text" id="fatherName" placeholder="Father's Full Name">
                        <div class="error-message" id="fatherNameError">Please enter a valid name (letters and spaces only)</div>
                    </div>
                    <div class="form-group">
                        <label for="motherName">Mother's Name:</label>
                        <input type="text" id="motherName" placeholder="Mother's Full Name">
                        <div class="error-message" id="motherNameError">Please enter a valid name (letters and spaces only)</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Gender:</label>
                        <div class="radio-group">
                            <label><input type="radio" name="gender" value="male"> Male</label>
                            <label><input type="radio" name="gender" value="female"> Female</label>
                        </div>
                        <div class="error-message" id="genderError">Please select a gender</div>
                    </div>
                    <div class="form-group">
                        <label for="dob">Date of Birth:</label>
                        <input type="date" id="dob">
                        <div class="error-message" id="dobError">Please enter a valid date of birth</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="email">E-mail:</label>
                        <input type="email" id="email" placeholder="email@wiz.com">
                        <div class="error-message" id="emailError">Please enter a valid email address</div>
                    </div>
                    <div class="form-group">
                        <label for="level">Level:</label>
                        <select id="level">
                            <option value="">Select Level</option>
                            <option value="phd">PHD</option>
                            <option value="mas">MASTER</option>
                            <option value="deg">DEGREE</option>
                            <option value="dip">DIPLOMA</option>
                        </select>
                        <div class="error-message" id="levelError">Please select a level</div>
                    </div>
                </div>
                
                 <div class="form-row">
                    <div class="form-group">
                        <label for="department">Department:</label>
                        <select id="department">
                            <option value="">Select Department</option>
                            <option value="computer">Computer Engineering</option>
                            <option value="electrical">Electrical Engineering</option>
                            <option value="mechanical">Mechanical Engineering</option>
                            <option value="civil">Civil Engineering</option>
                            <option value="business">Business Administration</option>
                            <option value="arts">Arts & Sciences</option>
                        </select>
                        <div class="error-message" id="departmentError">Please select a department</div>
                    </div>
                    <div class="form-group">
                        <label for="phone">Tel/Mobile:</label>
                        <input type="tel" id="phone" placeholder="+60123456789">
                        <div class="error-message" id="phoneError">Please enter a valid phone number</div>
                    </div>
                </div>
            </div>
            
            <!-- Address Section -->
            <div class="address-section">
                <h3>Address</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="state">State:</label>
                        <input type="text" id="state" placeholder="State">
                        <div class="error-message" id="stateError">Please enter a valid state</div>
                    </div>
                    <div class="form-group">
                        <label for="city">City:</label>
                        <input type="text" id="city" placeholder="City">
                        <div class="error-message" id="cityError">Please enter a valid city</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="postcode">Postcode:</label>
                        <input type="text" id="postcode" placeholder="Postcode">
                        <div class="error-message" id="postcodeError">Please enter a valid postcode</div>
                    </div>
                </div>
            </div>
            
            <!-- Buttons -->
            <div class="button-group">
                <button type="submit" class="register-btn">Register</button>
                <button type="reset" class="reset-btn" id="resetBtn">Reset</button>
            </div>
        </form>
    </div>

    <!-- Bootstrap Modal for Success Message -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="successModalLabel">Registration Successful</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Your details have been saved!
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS and Popper.js for modal functionality -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Validation functions
            function validateName(name) {
                return /^[A-Za-z\s]{2,}$/.test(name.trim());
            }

            function validateEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }

            function validatePhone(phone) {
                return /^[\+]?[0-9\s\-\(\)]{10,}$/.test(phone);
            }

            function validateRequired(value) {
                return value.trim() !== '';
            }

            function validateDate(date) {
                if (!date) return false;
                const selectedDate = new Date(date);
                const today = new Date();
                return selectedDate <= today;
            }

            function validatePostcode(postcode) {
                return /^\d{4,6}$/.test(postcode.trim());
            }

            // a) Comprehensive onBlur events with validation
            const validationRules = {
                studentName: validateName,
                fatherName: validateName,
                motherName: validateName,
                email: validateEmail,
                phone: validatePhone,
                state: validateRequired,
                city: validateRequired,
                postcode: validatePostcode,
                dob: validateDate
            };

            // Apply onblur validation to all relevant fields
            Object.keys(validationRules).forEach(fieldId => {
                const field = document.getElementById(fieldId);
                const errorElement = document.getElementById(fieldId + 'Error');
                
                field.addEventListener('blur', function() {
                    const isValid = validationRules[fieldId](this.value);
                    
                    if (!isValid && this.value.trim() !== '') {
                        this.classList.add('error');
                        this.classList.remove('success');
                        errorElement.style.display = 'block';
                    } else if (isValid && this.value.trim() !== '') {
                        this.classList.remove('error');
                        this.classList.add('success');
                        errorElement.style.display = 'none';
                    } else {
                        this.classList.remove('error', 'success');
                        errorElement.style.display = 'none';
                    }
                    
                    console.log(`Field "${fieldId}" validation: ${isValid ? 'Valid' : 'Invalid'}`);
                });
            });

            // Special validation for select fields
            const selectFields = ['level', 'department'];
            selectFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                const errorElement = document.getElementById(fieldId + 'Error');
                
                field.addEventListener('blur', function() {
                    const isValid = this.value !== '';
                    
                    if (!isValid) {
                        this.classList.add('error');
                        errorElement.style.display = 'block';
                    } else {
                        this.classList.remove('error');
                        errorElement.style.display = 'none';
                    }
                    
                    console.log(`Select field "${fieldId}" validation: ${isValid ? 'Valid' : 'Invalid'}`);
                });
            });

            // Gender radio buttons validation
            const genderRadios = document.querySelectorAll('input[name="gender"]');
            const genderError = document.getElementById('genderError');
            
            genderRadios.forEach(radio => {
                radio.addEventListener('blur', function() {
                    const isGenderSelected = Array.from(genderRadios).some(radio => radio.checked);
                    
                    if (!isGenderSelected) {
                        genderError.style.display = 'block';
                    } else {
                        genderError.style.display = 'none';
                    }
                    
                    console.log(`Gender validation: ${isGenderSelected ? 'Valid' : 'Invalid'}`);
                });
            });

            // b) onFocus event for email field
            const emailField = document.getElementById('email');
            emailField.addEventListener('focus', function() {
                this.classList.add('highlight');
                console.log('Email field is now focused');
            });
            
            emailField.addEventListener('blur', function() {
                this.classList.remove('highlight');
            });

            // c) onChange event for name fields to convert to uppercase
            const nameFields = ['studentName', 'fatherName', 'motherName'];
            nameFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                field.addEventListener('change', function() {
                    this.value = this.value.toUpperCase();
                    console.log(`Converted ${fieldId} to uppercase: ${this.value}`);
                });
                
                // Also convert on blur to ensure it happens
                field.addEventListener('blur', function() {
                    if (validateName(this.value)) {
                        this.value = this.value.toUpperCase();
                    }
                });
            });

            // d) Form submission with Bootstrap modal and validation
            const registrationForm = document.getElementById('registrationForm');
            registrationForm.addEventListener('submit', function(event) {
                event.preventDefault();
                
                // Validate all fields before submission
                let isFormValid = true;
                
                // Validate name fields
                nameFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    const isValid = validateName(field.value);
                    const errorElement = document.getElementById(fieldId + 'Error');
                    
                    if (!isValid) {
                        field.classList.add('error');
                        errorElement.style.display = 'block';
                        isFormValid = false;
                    }
                });
                
                // Validate other fields
                Object.keys(validationRules).forEach(fieldId => {
                    if (!nameFields.includes(fieldId)) {
                        const field = document.getElementById(fieldId);
                        const isValid = validationRules[fieldId](field.value);
                        const errorElement = document.getElementById(fieldId + 'Error');
                        
                        if (!isValid) {
                            field.classList.add('error');
                            errorElement.style.display = 'block';
                            isFormValid = false;
                        }
                    }
                });
                
                // Validate select fields
                selectFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    const isValid = field.value !== '';
                    const errorElement = document.getElementById(fieldId + 'Error');
                    
                    if (!isValid) {
                        field.classList.add('error');
                        errorElement.style.display = 'block';
                        isFormValid = false;
                    }
                });
                
                // Validate gender
                const isGenderSelected = Array.from(genderRadios).some(radio => radio.checked);
                if (!isGenderSelected) {
                    genderError.style.display = 'block';
                    isFormValid = false;
                }
                
                if (isFormValid) {
                    // Show the success modal
                    const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                    successModal.show();
                    console.log('Form submitted successfully!');
                    
                    // You could add actual form submission logic here
                    // For example: send data to server using fetch API
                } else {
                    console.log('Form validation failed!');
                    alert('Please fix the errors in the form before submitting.');
                }
            });

            // Reset button functionality
            document.getElementById('resetBtn').addEventListener('click', function() {
                // Clear all error states and messages
                document.querySelectorAll('.error-message').forEach(error => {
                    error.style.display = 'none';
                });
                document.querySelectorAll('input, select').forEach(field => {
                    field.classList.remove('error', 'success', 'highlight');
                });
                console.log('Form reset');
            });
        });
    </script>
</body>
</html>